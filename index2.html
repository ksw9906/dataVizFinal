<html>
  <head>
    <link rel="stylesheet" type="text/css" href="styles.css"/>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    // Load the Visualization API and the corechart package.
    google.charts.load('current', {'packages':['corechart','controls']});

      // Set a callback to run when the Google Visualization API is loaded.
		google.charts.setOnLoadCallback(drawChart);
		// Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
	  
	  function handleQueryResponse(response){
		
		 if (response.isError()) {
			alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
			return;
		}

		var data = response.getDataTable();
		
		console.log(data);
		//var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
		//chart.draw(data, {width: 800, height: 400, is3D: true});
		
			//Create the data table.
		var graphData = new google.visualization.arrayToDataTable([
			[data.Sf[0].label,data.Sf[1].label, {role: 'style'}],
			[data.Tf[0].c[0].v, data.Tf[0].c[1].v, 'black'],
			[data.Tf[1].c[0].v, data.Tf[1].c[1].v, 'blue'],
			[data.Tf[2].c[0].v, data.Tf[2].c[1].v, 'red'],
			[data.Tf[3].c[0].v, data.Tf[3].c[1].v, 'red'],
			[data.Tf[4].c[0].v, data.Tf[4].c[1].v, 'black'],
			[data.Tf[5].c[0].v, data.Tf[5].c[1].v, 'black'],
			[data.Tf[6].c[0].v, data.Tf[6].c[1].v, 'green'],
			[data.Tf[7].c[0].v, data.Tf[7].c[1].v, 'blue'],
			[data.Tf[8].c[0].v, data.Tf[8].c[1].v, 'green'],
			[data.Tf[9].c[0].v, data.Tf[9].c[1].v, 'blue'],
			[data.Tf[10].c[0].v, data.Tf[10].c[1].v, 'black'],
			[data.Tf[11].c[0].v, data.Tf[11].c[1].v, 'black']
	  ]);
	
			//Create a dashboard.
			var dashboard = new google.visualization.Dashboard(
				document.getElementById('dashboard_div'));
	
			// Create a range slider, passing some options
			var rangeSlider = new google.visualization.ControlWrapper({
				'controlType': 'NumberRangeFilter',
				'containerId': 'range_div',
				'options': {
					'filterColumnLabel': 'Total Deck Price'
				}
			});
			
			
			var chart = new google.visualization.ChartWrapper({
				"chartType":"ColumnChart",
				"containerId":"chart_div",
				"options": {'title':'Standard Deck Prices',
												'width':1000,
												'height':800}
			});	
			
			dashboard.bind(rangeSlider,chart);
			// Instantiate and draw our chart, passing in some options.
			
			dashboard.draw(graphData);
	  }
	  
	function drawChart() {
		
		var url = "https://docs.google.com/spreadsheets/d/1pKY5tvh7YFk18kpQPhaKxJtcKl11U0KpAR1Dz-XXj_0/edit?usp=sharing&sheet=DeckPrices";
		
		var query = new google.visualization.Query(url);
		
		query.send(handleQueryResponse);
	}
    </script>
  </head>

  <body>
    <div id="nav">
      <a class="navLink selectedNav" href="#">Deck Information</a>
      <a class="navLink" href="index.html">Card Information</a>
    </div>    
    <!--Div that will hold the pie chart-->
    <div id="dashboard_div">
      <div id="range_div"></div>
      <div id="chart_div"></div>
    </div>
  </body>
</html>